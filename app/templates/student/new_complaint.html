<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File New Complaint - Complaint Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/student.css') }}">
</head>

<body>
    <!-- Main Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar fixed-top">
            <a href="{{ url_for('student.home') }}"><i class="fas fa-home me-2"></i> Dashboard</a>
            <a href="{{ url_for('student.new_complaint') }}" class="active"><i class="fas fa-plus-circle me-2"></i> New
                Complaint</a>
            <a href="{{ url_for('student.complaint_history') }}"><i class="fas fa-history me-2"></i> Complaint
                History</a>
            <a href="{{ url_for('student.feedback') }}"><i class="fas fa-star me-2"></i> Feedback</a>
            <a href="#"><i class="fas fa-question-circle me-2"></i> Help & FAQ</a>
        </div>

        <div class="main-content-dashboard">

            <div class="complaint-container">
                <div class="complaint-form-container">
                    <div class="complaint-form-container">
                        <!-- Complaint Form -->
                        <div class="form-card">
                            <div class="form-header">
                                <h1><i class="fas fa-plus-circle"></i> File a New Complaint</h1>
                                <p>Submit your complaint with detailed information for quick resolution</p>
                            </div>

                            <form method="POST" enctype="multipart/form-data" id="complaintForm">
                                {{ form.hidden_tag() }}
                                <!-- Complaint Details Section -->
                                <div class="form-section">
                                    <h3 class="section-title"><i class="fas fa-info-circle"></i> Complaint Details</h3>

                                    <div class="form-group">
                                        {{ form.title.label(class="form-label required") }}
                                        {{ form.title(class="form-control", placeholder="Brief description of your complaint") }}
                                    </div>

                                    <div class="form-group">
                                        {{ form.category.label(class="form-label required") }}
                                        {{ form.category(class="form-select") }}
                                    </div>

                                    <div class="form-group">
                                        {{ form.description.label(class="form-label required") }}
                                        {{ form.description(class="form-control",
                                        placeholder="Please describe your complaint in detail...") }}
                                    </div>
                                </div>

                                <!-- Location Section -->
                                <!-- <div class="form-section">
                                <h3 class="section-title"><i class="fas fa-map-marker-alt"></i> Location</h3>

                                <div class="form-group">
                                    <label for="complaintLocation" class="form-label required">
                                        <i class="fas fa-location-arrow"></i> Location
                                    </label>
                                    <input type="text" class="form-control" id="complaintLocation"
                                        placeholder="Where did this occur? (e.g., Main Building, Room 101)" required>
                                </div>
                            </div> -->

                                <!-- Evidence Section -->
                                <div class="form-section">
                                    <h3 class="section-title"><i class="fas fa-paperclip"></i> Evidence</h3>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-image"></i> Upload Evidence
                                        </label>
                                        <div class="file-upload">
                                            <div class="file-upload-icon">
                                                <i class="fas fa-cloud-upload-alt"></i>
                                            </div>
                                            <p>Drag & drop files here or</p>
                                            {{ form.evidence(class="file-input", id="fileInput", multiple=true) }}
                                            <label for="fileInput" class="file-label">Choose Files</label>
                                        </div>
                                        <div class="file-list" id="fileList">
                                            <!-- Files will be listed here -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Preferences Section -->
                                <div class="form-section">
                                    <h3 class="section-title"><i class="fas fa-cog"></i> Preferences</h3>

                                    <div class="form-check">
                                        {{ form.anonymous(class="form-check-input") }}
                                        {{ form.anonymous.label(class="form-check-label") }}
                                    </div>

                                    <div class="form-check">
                                        {{ form.urgent(class="form-check-input") }}
                                        {{ form.urgent.label(class="form-check-label") }}
                                    </div>

                                    <div class="form-check">
                                        {{ form.updates_email(class="form-check-input") }}
                                        {{ form.updates_email.label(class="form-check-label") }}
                                    </div>
                                </div>

                                <!-- Submit Button -->
                                <div class="form-group">
                                    {{ form.submit(class="btn btn-accent btn-full") }}
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Sidebar with Tips -->
                    <div class="complaint-sidebar">
                        <div class="tip-card">
                            <h4 class="tip-title"><i class="fas fa-lightbulb"></i> Tips for Effective Complaints</h4>
                            <ul class="tip-list">
                                <li class="tip-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Be specific and provide accurate details</span>
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Include date, time, and location of the incident</span>
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Upload supporting evidence (photos, documents)</span>
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Choose the correct category for faster resolution</span>
                                </li>
                                <li class="tip-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Check if similar complaints have been filed before</span>
                                </li>
                            </ul>
                        </div>

                        <div class="tip-card">
                            <h4 class="tip-title"><i class="fas fa-shield-alt"></i> Privacy Assurance</h4>
                            <p>Your complaint details are confidential. Anonymous complaints protect your identity while
                                still
                                addressing the issue.</p>
                        </div>

                        <div class="tip-card">
                            <h4 class="tip-title"><i class="fas fa-clock"></i> Expected Response Time</h4>
                            <p>Regular complaints: 3-5 business days<br>Urgent complaints: 24-48 hours</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chatbot -->
        <div class="chatbot" data-bs-toggle="tooltip" title="Chatbot Assistance">
            <i class="fas fa-robot fa-2x"></i>
        </div>

        <div class="chat-window">
            <div class="chat-header">
                <div>
                    <strong>Help Assistant</strong>
                    <div class="small">We're here to help you 24/7</div>
                </div>
                <i class="fas fa-times close-chat"></i>
            </div>
            <div class="chat-messages">
                <div class="alert alert-info mb-3">
                    <strong>Hello!</strong> How can I help you with your complaints today?
                </div>
                <div class="card mb-2">
                    <div class="card-body py-2">
                        <strong>Frequently Asked Questions:</strong>
                        <div class="d-grid gap-2 mt-2">
                            <button class="btn btn-sm btn-outline-secondary text-start faq-question">How to submit a new
                                complaint?</button>
                            <button class="btn btn-sm btn-outline-secondary text-start faq-question">How to check
                                complaint
                                status?</button>
                            <button class="btn btn-sm btn-outline-secondary text-start faq-question">What to do if my
                                complaint is unresolved?</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
        <script>
            // File upload functionality
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');

            fileInput.addEventListener('change', function (e) {
                for (const file of e.target.files) {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.innerHTML = `
                    <div class="file-name">
                        <i class="fas fa-file"></i>
                        <span>${file.name}</span>
                    </div>
                    <button type="button" class="file-remove">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                    fileItem.querySelector('.file-remove').addEventListener('click', function () {
                        fileItem.remove();
                    });

                    fileList.appendChild(fileItem);
                }

                // Clear the input to allow uploading the same file again if needed
                //fileInput.value = '';
            });

            // Form submission
            // document.getElementById('complaintForm').addEventListener('submit', function (e) {
            //     e.preventDefault();

            //     // Basic validation
            //     const title = document.getElementById('complaintTitle').value;
            //     const category = document.getElementById('complaintCategory').value;
            //     const description = document.getElementById('complaintDescription').value;

            //     if (!title || !category || !description) {
            //         alert('Please fill in all required fields.');
            //         return;
            //     }

            //     // Simulate form submission
            //     alert('Complaint submitted successfully! You will receive a confirmation email shortly.');
            //     this.reset();
            //     fileList.innerHTML = '';
            // });

            // Set today's date as default for the incident date
            document.getElementById('complaintDate').valueAsDate = new Date();
        </script>
</body>

</html>